```
 â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
 â•‘                                                                                        â•‘
 â•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—     â•‘
 â•‘     â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â•â•â•     â•‘
 â•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—     â•‘
 â•‘     â–ˆâ–ˆâ•”â•â•â•  â•šâ•â•â•â•â–ˆâ–ˆâ•‘â•šâ•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â•šâ•â•â•â•â–ˆâ–ˆâ•‘     â•‘
 â•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘     â•‘
 â•‘     â•šâ•â•â•â•â•â•â•â•šâ•â•â•â•â•â•â•â•šâ•â•â•â•â•â•â•â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•â•   â•šâ•â•   â•šâ•â•â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â•â•â•â•â•â•     â•‘
 â•‘                                                                                        â•‘
 â•‘                     Java 17+ Building Blocks for Strongly-Typed Code                   â•‘
 â•‘                                                                                        â•‘
 â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

> High-level, strongly-typed building blocks for Java 17+ applicationsâ€”framework-independent core with seamless integrations

ğŸ“– **LLM Context:** [LLM.md](LLM/LLM.md)

> **NOTE:** This library is WORK-IN-PROGRESS

---

## Table of Contents

- [What is Essentials?](#what-is-essentials)
- [License](#license)
- [Why Choose Essentials?](#why-choose-essentials)
- [When Should You Use This?](#when-should-you-use-this)
- [Quick Start](#quick-start)
- [Module Overview](#module-overview)
  - [Core Modules](#core-modules)
  - [Type Integrations](#type-integrations)
  - [Advanced Components](#advanced-components)
- [Getting Started](#getting-started)
- [Version Compatibility](#version-compatibility)
- âš ï¸ [Security](#security)
- [Testing](#testing)
- [Resources](#resources)


---

## What is Essentials?

Essentials is a set of Java 17+ building blocks designed to help you write **strongly-typed, self-documenting code** without framework lock-in.

**Core Modules:** Zero-dependency utilities providing **semantic types**, immutable value objects, functional primitives, and reactive patterns.

**Integration Modules:** Seamless support for Jackson, Spring Boot, Spring Data, JPA, JDBI, Avro, and more.

**Advanced Components:** Production-ready infrastructure patterns (`Event Store`, `Event Sourcing`, `Distributed Locks`, `Durable Queues`, `Inbox`/`Outbox`) using your existing PostgreSQL or MongoDB database.

**Choose your path:**
- Use **core modules** for strongly-typed domain modeling in any Java application using **semantic types** (think `OrderId` instead of `String`)
- Add **integration modules** for framework-specific serialization and persistence of **semantic types**
- Use **components** for distributed systems requiring event sourcing, queues, and coordination

---
## License

Essentials is released under version 2.0 of the [Apache License](https://www.apache.org/licenses/LICENSE-2.0).

--- 

## Why Choose Essentials?

### âœ… Eliminate Primitive Obsession

Stop passing `String orderId, String customerId` and hoping you get the order right. Semantic types make code self-documenting and catch errors at compile time:

```java
// Before: What are these strings? Easy to mix up!
public void processOrder(String orderId, String customerId, BigDecimal amount) { ... }
processOrder(customerId, orderId, amount);  // Compiles, but wrong!

// After: Compiler catches mistakes
public void processOrder(OrderId orderId, CustomerId customerId, Amount amount) { ... }
processOrder(customerId, orderId, amount);  // Compile error!
```

Creating semantic types takes just 4 lines:

```java
public class OrderId extends CharSequenceType<OrderId> implements Identifier {
    public OrderId(CharSequence value) { super(value); }
    public OrderId(String value) { super(value); }
    public static OrderId of(CharSequence value) { return new OrderId(value); }
}
```

### âœ… Zero-Dependency Core

Core modules (`shared`, `types`, `immutable`, `reactive`) have **no runtime dependencies** (except SLF4J as `provided`). Your application controls its dependency tree.

### âœ… Framework-Independent with Easy Integrations

Write your domain logic once. Integrate with your preferred frameworks through dedicated modules:

| Framework | Module | Purpose                                                      |
|-----------|--------|--------------------------------------------------------------|
| Jackson | `types-jackson` | JSON serialization for **Semantic Types**                     |
| Spring Data MongoDB | `types-springdata-mongo` | MongoDB persistence for **Semantic Types**                    |
| Spring Data JPA | `types-springdata-jpa` | JPA persistence for **Semantic Types**                        |
| JDBI v3 | `types-jdbi` | `Jdbi` SQL argument and result mapping for **Semantic Types** |
| Apache Avro | `types-avro` | Binary serialization for **Semantic Types**                                        |
| Spring WebMvc/WebFlux | `types-spring-web` | Path/request parameter conversion for **Semantic Types**         |

### âœ… Provided Scope for Third-Party Dependencies

Integration modules use Maven `provided` scopeâ€”dependencies are **NOT transitive**.  
You control which versions of Jackson, Spring, and other frameworks your application uses!

```xml
<dependency>
    <groupId>dk.trustworks.essentials</groupId>
    <artifactId>types-jackson</artifactId>
    <version>${essentials.version}</version>
</dependency>
<!-- You add Jackson yourself at your preferred version -->
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-databind</artifactId>
    <version>${jackson.version}</version>
</dependency>
```

### âœ… Production-Ready Infrastructure Components

For distributed applications, Essentials Components provide:
- **Event Store** with subscriptions and processors (PostgreSQL)
- **Event Sourcing** with `AggregateRoot`s, `Decider`, `Evolver`, `Repositories`, `Snapshot Repositories` (PostgreSQL)
- **Distributed Fenced Locks** for leader election and singleton workers
- **Durable Queues** with retry, DLQ, and ordered delivery
- **Inbox/Outbox** patterns for reliable messaging

All using your existing databaseâ€”no Redis, Kafka, Axon-Server, or EventStoreDB required for intra-service coordination.

### Database & Technology Support

#### Foundation Components

| Database | Locks | Queues | Inbox/Outbox | Transaction Support    |
|----------|-------|--------|--------------|------------------------|
| **PostgreSQL** | âœ… | âœ… | âœ… | JDBI + Spring JDBC/JPA |
| **MongoDB** | âœ… | âœ… | âœ… | Spring Data MongoDB    |

#### Event-Driven Components (PostgreSQL Only)

| Database | Event Store | Subscriptions | Event Processor | Aggregates |
|----------|-------------|---------------|-----------------|------------|
| **PostgreSQL** | âœ… Full-featured | âœ… | âœ… | âœ… |
| **MongoDB** | âŒ | âŒ | âŒ | âŒ |

---

## When Should You Use This?

### âœ… Good Fit

| Use Case | Recommended Modules                                                                                                           |
|----------|-------------------------------------------------------------------------------------------------------------------------------|
| **Strongly-typed domain models** | `types` + framework integrations (including Kotlin support)                                                                   |
| **Immutable value objects** | `immutable`, `immutable-jackson`                                                                                              |
| **Event-driven architecture** | `reactive` (`EventBus`, `CommandBus`)                                                                                         |
| **Event sourcing & CQRS** | Components: `postgresql-event-store`, `eventsourced-aggregates` and for Kotlin `kotlin-eventsourcing`, `kotlin-eventsourcing` |
| **Distributed coordination** | Components: `postgresql-distributed-fenced-lock`, `postgresql-queue`, `springdata-mongo-queue`, `springdata-mongo-distributed-fenced-lock` |
| **Reliable messaging** | Components: `foundation` (`Inbox`/`Outbox`)                                                                                       |

### âŒ Not a Good Fit

- **Cross-service messaging** at scaleâ€”use Kafka, RabbitMQ
- **Cross-service distributed locks**â€”use Zookeeper, etcd
- **Extreme throughput requirements**â€”millions of events/second need specialized stores

---

## Quick Start

### Path 1: Strongly-Typed Domain Models

**1. Add dependencies:**
```xml
<dependency>
    <groupId>dk.trustworks.essentials</groupId>
    <artifactId>types</artifactId>
    <version>${essentials.version}</version>
</dependency>
<dependency>
    <groupId>dk.trustworks.essentials</groupId>
    <artifactId>types-jackson</artifactId>
    <version>${essentials.version}</version>
</dependency>
```

**2. Create semantic types:**
```java
public class OrderId extends CharSequenceType<OrderId> implements Identifier {
    public OrderId(CharSequence value) { super(value); }
    public OrderId(String value) { super(value); }
    public static OrderId of(CharSequence value) { return new OrderId(value); }
    public static OrderId random() { return new OrderId(RandomIdGenerator.generate()); }
}

public class Quantity extends IntegerType<Quantity> {
    public Quantity(Integer value) {
        super(value);
        FailFast.requireTrue(value >= 0, "Quantity cannot be negative");
    }
    public static Quantity of(int value) { return new Quantity(value); }
}
```

**3. Use in your domain:**
```java
public class CreateOrder {
    public final OrderId                  id;
    public final Amount                   totalAmount;
    public final CurrencyCode             currency;
    public final Percentage               salesTax;
    public final Map<ProductId, Quantity> orderLines;
}
```

**4. Configure Jackson:**
```java
objectMapper.registerModule(new EssentialTypesJacksonModule());
```

### Path 2: Event-Driven Components (Spring Boot)

For distributed applications with event sourcing, queues, and locks:

**1. Add Spring Boot starter:**
```xml
<dependency>
    <groupId>dk.trustworks.essentials.components</groupId>
    <artifactId>spring-boot-starter-postgresql-event-store</artifactId>
    <version>${essentials.version}</version>
</dependency>
```

**2. Configure database:**
```yaml
spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/myapp
    username: ${DB_USER}
    password: ${DB_PASSWORD}
```

**3. Inject auto-configured components:**
```java
@Service
public class OrderService {
    private final EventStore eventStore;
    private final DurableQueues queues;
    private final FencedLockManager locks;

    // All auto-configured by Spring Bootâ€”just inject and use
}
```

See [Essentials Components](components/README.md) for complete documentation.

---

## Module Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                   ESSENTIALS MODULE OVERVIEW                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SPRING BOOT AUTO-CONFIGURATION                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  spring-boot-starter-postgresql          spring-boot-starter-postgresql-event-store             â”‚
â”‚  spring-boot-starter-mongodb             spring-boot-starter-admin-ui                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚
                                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ COMPONENTS - PostgreSQL                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ postgresql-event-store   â”‚  â”‚ eventsourced-aggregates  â”‚  â”‚ kotlin-eventsourcing     â”‚       â”‚
â”‚  â”‚ (EventStore, Subs, Proc) â”‚  â”‚ (AggregateRoot, Decider) â”‚  â”‚ (Kotlin DSL)             â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚postgresql-distributed-   â”‚  â”‚ postgresql-queue         â”‚  â”‚ postgresql-document-db   â”‚       â”‚
â”‚  â”‚fenced-lock               â”‚  â”‚ (DurableQueues+DLQ)      â”‚  â”‚ (Kotlin DocumentDB)      â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                                   â”‚
â”‚  â”‚spring-postgresql-event-  â”‚                                                                   â”‚
â”‚  â”‚store (Spring Tx)         â”‚                                                                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ COMPONENTS - MongoDB                                                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ springdata-mongo-distributed-      â”‚  â”‚ springdata-mongo-queue             â”‚                 â”‚
â”‚  â”‚ fenced-lock                        â”‚  â”‚ (DurableQueues+DLQ)                â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ COMPONENTS - Foundation & UI                                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ foundation-types â”‚  â”‚ foundation       â”‚  â”‚ foundation-test  â”‚  â”‚ vaadin-ui        â”‚         â”‚
â”‚  â”‚ (Common Types)   â”‚  â”‚ (UnitOfWork,     â”‚  â”‚ (Test Utils)     â”‚  â”‚ (Admin UI)       â”‚         â”‚
â”‚  â”‚                  â”‚  â”‚  Inbox/Outbox)   â”‚  â”‚                  â”‚  â”‚                  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚
                                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TYPE INTEGRATIONS (provided scope - framework-specific)                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  types-jackson          types-springdata-mongo    types-springdata-jpa    types-jdbi            â”‚
â”‚  types-avro             types-spring-web          immutable-jackson                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚
                                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CORE MODULES (zero dependencies except SLF4J as provided)                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚  â”‚ shared       â”‚  â”‚ types        â”‚  â”‚ immutable    â”‚  â”‚ reactive     â”‚                         â”‚
â”‚  â”‚ (Tuples,     â”‚  â”‚ (Semantic    â”‚  â”‚ (Immutable   â”‚  â”‚ (EventBus,   â”‚                         â”‚
â”‚  â”‚  Reflection, â”‚  â”‚  Types)      â”‚  â”‚  Value       â”‚  â”‚  CommandBus) â”‚                         â”‚
â”‚  â”‚  Validation) â”‚  â”‚              â”‚  â”‚  Objects)    â”‚  â”‚              â”‚                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Core Modules

Zero-dependency building blocks:

| Module | Purpose | Documentation |
|--------|---------|---------------|
| [shared](shared/README.md) | Tuples, collections, reflection, validation, exceptions, message formatting | [LLM](LLM/LLM-shared.md) |
| [types](types/README.md) | Semantic types via `SingleValueType` (OrderId, Amount, Percentage, etc.) | [LLM](LLM/LLM-types.md) |
| [immutable](immutable/README.md) | Immutable value objects with auto-generated `equals`/`hashCode`/`toString` | [LLM](LLM/LLM-immutable.md) |
| [reactive](reactive/README.md) | LocalEventBus, LocalCommandBus for in-memory event-driven patterns | [LLM](LLM/LLM-reactive.md) |

**Core Module Dependencies:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CORE MODULE DEPENDENCY GRAPH                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚                      â”‚
                           â”‚      reactive        â”‚
                           â”‚                      â”‚
                           â”‚  â€¢ LocalEventBus     â”‚
                           â”‚  â€¢ LocalCommandBus   â”‚
                           â”‚  â€¢ Interceptors      â”‚
                           â”‚                      â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â”‚ depends on
                                      â”‚
                                      â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                    â”‚      â”‚                      â”‚
     â”‚     immutable      â”‚      â”‚        types         â”‚
     â”‚                    â”‚      â”‚                      â”‚
     â”‚  â€¢ ValueObject     â”‚      â”‚  â€¢ SingleValueType   â”‚
     â”‚  â€¢ @Exclude        â”‚      â”‚  â€¢ Amount, %         â”‚
     â”‚    annotations     â”‚      â”‚  â€¢ CurrencyCode      â”‚
     â”‚                    â”‚      â”‚  â€¢ Identifiers       â”‚
     â”‚                    â”‚      â”‚                      â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                              â”‚
              â”‚                              â”‚ depends on
              â”‚                              â”‚
              â”‚                              â–¼
              â”‚                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                 â”‚                                  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚           shared                 â”‚
                                â”‚                                  â”‚
                                â”‚  â€¢ Tuples (Pair, Triple)         â”‚
                                â”‚  â€¢ FailFast validation           â”‚
                                â”‚  â€¢ Reflection (Reflector)        â”‚
                                â”‚  â€¢ Collections utilities         â”‚
                                â”‚  â€¢ MessageFormatter              â”‚
                                â”‚  â€¢ Checked* interfaces           â”‚
                                â”‚  â€¢ InterceptorChain              â”‚
                                â”‚  â€¢ PatternMatchingInvoker        â”‚
                                â”‚                                  â”‚
                                â”‚  Zero dependencies               â”‚
                                â”‚  (except SLF4J as provided)      â”‚
                                â”‚                                  â”‚
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Legend:
  â–¼  = depends on
  Module dependencies are managed via Maven with zero transitive runtime dependencies
```

### Type Integrations

Type-Integration [LLM Documentation](LLM/LLM-types-integrations.md)

Framework-specific support for semantic types (all use `provided` scope):

| Module | Framework | Purpose | LLM Documentation                        |
|--------|-----------|---------|------------------------------------------|
| [types-jackson](types-jackson/README.md) | Jackson | JSON serialization/deserialization | [LLM](LLM/LLM-types-jackson.md)          |
| [types-springdata-mongo](types-springdata-mongo/README.md) | Spring Data MongoDB | MongoDB persistence + ID generation | [LLM](LLM/LLM-types-springdata-mongo.md) |
| [types-springdata-jpa](types-springdata-jpa/README.md) | Spring Data JPA | JPA persistence (experimental) | [LLM](LLM/LLM-types-springdata-jpa.md)   |
| [types-jdbi](types-jdbi/README.md) | JDBI v3 | SQL argument/column mapping | [LLM](LLM/LLM-types-jdbi.md)             |
| [types-avro](types-avro/README.md) | Apache Avro | Binary serialization with logical types | [LLM](LLM/LLM-types-avro.md)             |
| [types-spring-web](types-spring-web/README.md) | Spring WebMvc/WebFlux | `@PathVariable`/`@RequestParam` conversion | [LLM](LLM/LLM-types-spring-web.md)       |
| [immutable-jackson](immutable-jackson/README.md) | Jackson | Deserialization for immutable classes | [LLM](LLM/LLM-immutable-jackson.md)      |

### Advanced Components

Production-ready infrastructure patterns. See [Essentials Components](components/README.md) for complete documentation.  
Components [LLM Documentation](LLM/LLM-components.md)

**Spring Boot Starters:**

| Starter | What It Provides | LLM Documentation |
|---------|------------------|-------------------|
| [spring-boot-starter-postgresql](components/spring-boot-starter-postgresql/README.md) | UnitOfWork, FencedLocks, DurableQueues, Inbox/Outbox, CommandBus | [LLM](LLM/LLM-spring-boot-starter-modules.md) |
| [spring-boot-starter-postgresql-event-store](components/spring-boot-starter-postgresql-event-store/README.md) | All above + EventStore, Subscriptions, EventProcessors, Aggregates | [LLM](LLM/LLM-spring-boot-starter-modules.md) |
| [spring-boot-starter-mongodb](components/spring-boot-starter-mongodb/README.md) | MongoDB equivalents of foundation components | [LLM](LLM/LLM-spring-boot-starter-modules.md) |

**Component Modules:**

| Module | Purpose                                                       | LLM Documentation |
|--------|---------------------------------------------------------------|-------------------|
| [postgresql-event-store](components/postgresql-event-store/README.md) | Full-featured Event Store with subscriptions and gap handling | [LLM](LLM/LLM-postgresql-event-store.md) |
| [eventsourced-aggregates](components/eventsourced-aggregates/README.md) | AggregateRoot, Decider, Evolver patterns for DDD              | [LLM](LLM/LLM-eventsourced-aggregates.md) |
| [postgresql-distributed-fenced-lock](components/postgresql-distributed-fenced-lock/README.md) | PostgreSQL distributed locking with fence tokens              | [LLM](LLM/LLM-postgresql-distributed-fenced-lock.md) |
| [postgresql-queue](components/postgresql-queue/README.md) | PostgreSQL durable message queues with retry and DLQ          | [LLM](LLM/LLM-postgresql-queue.md) |
| [springdata-mongo-distributed-fenced-lock](components/springdata-mongo-distributed-fenced-lock/README.md) | MongoDB distributed locking with fence tokens                 | [LLM](LLM/LLM-springdata-mongo-distributed-fenced-lock.md) |
| [springdata-mongo-queue](components/springdata-mongo-queue/README.md) | MongoDB durable message queues with retry and DLQ             | [LLM](LLM/LLM-springdata-mongo-queue.md) |
| [postgresql-document-db](components/postgresql-document-db/README.md) | Kotlin Document database using PostgreSQL JSONB               | [LLM](LLM/LLM-postgresql-document-db.md) |
| [kotlin-eventsourcing](components/kotlin-eventsourcing/README.md) | Kotlin DSL for functional event sourcing                      | [LLM](LLM/LLM-kotlin-eventsourcing.md) |

**Event Sourcing Stack Dependencies:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         EVENT SOURCING COMPONENT DEPENDENCIES                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚                                    â”‚
                        â”‚  spring-boot-starter-postgresql-   â”‚
                        â”‚  event-store                       â”‚
                        â”‚                                    â”‚
                        â”‚  Auto-configures entire stack:     â”‚
                        â”‚  â€¢ EventStore + Repositories       â”‚
                        â”‚  â€¢ Subscriptions + Processors      â”‚
                        â”‚  â€¢ UnitOfWork + Foundation         â”‚
                        â”‚                                    â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â”‚ auto-configures
                                      â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                     â”‚                     â”‚
                â–¼                     â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          â”‚  â”‚                      â”‚  â”‚                          â”‚
â”‚  eventsourced-aggregates â”‚  â”‚ kotlin-eventsourcing â”‚  â”‚ spring-postgresql-       â”‚
â”‚                          â”‚  â”‚      (optional)      â”‚  â”‚ event-store              â”‚
â”‚  â€¢ AggregateRoot         â”‚  â”‚  â€¢ Kotlin DSL        â”‚  â”‚                          â”‚
â”‚  â€¢ StatefulAggregate     â”‚  â”‚  â€¢ Decider           â”‚  â”‚  â€¢ Spring Tx support     â”‚
â”‚  â€¢ Decider pattern       â”‚  â”‚  â€¢ EventEvolver      â”‚  â”‚  â€¢ @Transactional        â”‚
â”‚  â€¢ EventStreamDecider    â”‚  â”‚  â€¢ Functional style  â”‚  â”‚    integration           â”‚
â”‚  â€¢ Repositories          â”‚  â”‚                      â”‚  â”‚                          â”‚
â”‚  â€¢ Snapshot support      â”‚  â”‚                      â”‚  â”‚                          â”‚
â”‚                          â”‚  â”‚                      â”‚  â”‚                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                           â”‚                           â”‚
             â”‚                           â”‚                           â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                                         â”‚ depends on
                                         â”‚
                                         â–¼
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚                                   â”‚
                         â”‚   postgresql-event-store          â”‚
                         â”‚                                   â”‚
                         â”‚   Core Event Store:               â”‚
                         â”‚   â€¢ ConfigurableEventStore        â”‚
                         â”‚   â€¢ Event persistence             â”‚
                         â”‚   â€¢ Event streaming               â”‚
                         â”‚   â€¢ Subscriptions (with gaps)     â”‚
                         â”‚   â€¢ GlobalEventOrder tracking     â”‚
                         â”‚   â€¢ EventProcessor framework      â”‚
                         â”‚   â€¢ Multitenancy support          â”‚
                         â”‚   â€¢ Interceptors                  â”‚
                         â”‚                                   â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â”‚ depends on
                                       â”‚
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚                 â”‚                 â”‚
                     â–¼                 â–¼                 â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚
         â”‚ foundation-      â”‚  â”‚  foundation      â”‚  â”‚  postgresql-     â”‚
         â”‚ types            â”‚  â”‚                  â”‚  â”‚  queue           â”‚
         â”‚                  â”‚  â”‚  â€¢ UnitOfWork    â”‚  â”‚                  â”‚
         â”‚ â€¢ EventId        â”‚  â”‚  â€¢ Inbox/Outbox  â”‚  â”‚  â€¢ DurableQueues â”‚
         â”‚ â€¢ EventOrder     â”‚  â”‚  â€¢ FencedLock    â”‚  â”‚  â€¢ Used by       â”‚
         â”‚ â€¢ Aggregate      â”‚  â”‚  â€¢ DurableQueues â”‚  â”‚    EventProc     â”‚
         â”‚   Type           â”‚  â”‚  â€¢ CommandBus    â”‚  â”‚                  â”‚
         â”‚ â€¢ Correlation    â”‚  â”‚                  â”‚  â”‚                  â”‚
         â”‚   Id             â”‚  â”‚                  â”‚  â”‚                  â”‚
         â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                     â”‚
                  â”‚                     â”‚
                  â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                                            â”‚
                  â”‚ depends on                                 â”‚
                  â”‚                                            â”‚
                  â–¼                                            â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚                  â”‚                          â”‚                  â”‚
      â”‚  types           â”‚                          â”‚  reactive        â”‚
      â”‚                  â”‚                          â”‚                  â”‚
      â”‚  â€¢ Semantic      â”‚                          â”‚  â€¢ EventBus      â”‚
      â”‚    types         â”‚                          â”‚  â€¢ CommandBus    â”‚
      â”‚                  â”‚                          â”‚  â€¢ Interceptors  â”‚
      â”‚                  â”‚                          â”‚                  â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                                             â”‚
               â”‚                                             â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                                               â”‚ depends on
                                               â”‚
                                               â–¼
                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   â”‚                      â”‚
                                   â”‚      shared          â”‚
                                   â”‚                      â”‚
                                   â”‚  â€¢ Tuples            â”‚
                                   â”‚  â€¢ Reflection        â”‚
                                   â”‚  â€¢ MessageFormatter  â”‚
                                   â”‚  â€¢ InterceptorChain  â”‚
                                   â”‚                      â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Note: PostgreSQL JDBC driver, JDBI v3, Jackson and Project Reactor are required runtime dependencies
```

---

## Getting Started

### Example 1: Semantic Types with Jackson

```java
// 1. Define types
public class CustomerId extends CharSequenceType<CustomerId> implements Identifier {
    public CustomerId(CharSequence value) { super(value); }
    public CustomerId(String value) { super(value); }
    public static CustomerId of(CharSequence value) { return new CustomerId(value); }
}

// 2. Use in commands/events
public record CreateOrder(
    OrderId orderId,
    CustomerId customerId,
    Amount totalAmount,
    CurrencyCode currency
) {}

// 3. Configure Jackson
ObjectMapper mapper = new ObjectMapper();
mapper.registerModule(new EssentialTypesJacksonModule());

// 4. Serialize/deserialize automatically
String json = mapper.writeValueAsString(new CreateOrder(
    OrderId.of("ORD-123"),
    CustomerId.of("CUST-456"),
    Amount.of("199.99"),
    CurrencyCode.USD
));
// {"orderId":"ORD-123","customerId":"CUST-456","totalAmount":"199.99","currency":"USD"}
```

### Example 2: LocalEventBus for Event-Driven Architecture

```java
// Create event bus
LocalEventBus eventBus = LocalEventBus.builder()
    .busName("OrderEvents")
    .parallelThreads(5)
    .onErrorHandler((subscriber, event, ex) -> log.error("Handler failed", ex))
    .build();

// Register handlers
eventBus.addSyncSubscriber(event -> {
    if (event instanceof OrderCreated created) {
        inventoryService.reserve(created.orderId());
    }
});

eventBus.addAsyncSubscriber(event -> {
    if (event instanceof OrderCreated created) {
        emailService.sendConfirmation(created.customerId());
    }
});

// Publish events
eventBus.publish(new OrderCreated(orderId, customerId));
```

### Example 3: LocalCommandBus for CQRS

```java
// Create command bus with handlers
LocalCommandBus commandBus = new LocalCommandBus();
commandBus.addCommandHandler(new OrderCommandHandler(orderRepository));

// Send commands
OrderId orderId = commandBus.send(new CreateOrder(customerId, items));

// Or async
Mono<OrderId> result = commandBus.sendAsync(new CreateOrder(customerId, items));
```

### Example 4: Immutable Value Objects

```java
public class ImmutableOrder extends ImmutableValueObject {
    public final OrderId                  orderId;
    public final CustomerId               customerId;
    @Exclude.EqualsAndHashCode  // Metadata, not part of identity
    public final Instant                  createdAt;
    @Exclude.ToString           // Don't log sensitive data
    public final Money                    totalPrice;

    public ImmutableOrder(OrderId orderId, CustomerId customerId,
                          Instant createdAt, Money totalPrice) {
        this.orderId = orderId;
        this.customerId = customerId;
        this.createdAt = createdAt;
        this.totalPrice = totalPrice;
    }
}

// Auto-generated equals/hashCode/toString based on non-excluded fields
```

---

## Version Compatibility

| Essentials Version | Java | Spring Boot | Notes |
|--------------------|------|-------------|-------|
| [0.40.24+](https://github.com/trustworksdk/essentials-project/tree/main) | 17+ | 3.3.x | Under active development |

### Migration Note

> [Cloud Create](https://github.com/cloudcreate-dk) originally developed the [Essentials project](https://github.com/cloudcreate-dk/essentials-project).
> As of May 8th 2025, [Trustworks](https://www.trustworks.dk) has assumed responsibility for further development.
>
> **Compatibility:** Trustworks' Essentials release version **0.40.24** remains API and functionally compatible with Cloud Create's version **0.40.24** (released May 5th 2025). Migration requires only updating module names and package references from `dk.cloudcreate` to `dk.trustworks`.

---

## Security

Several components allow customization of:
- Table names, column names, function names, index names (PostgreSQL)
- Collection names (MongoDB)
- Configuration values

Essentials applies naming convention validation as an initial defense layer. **However, this is NOT exhaustive protection against SQL/NoSQL injection.**

### âš ï¸ Critical: SQL/NoSQL Injection Risk

> **Your Responsibility:** Users MUST sanitize and validate all:
> - API input parameters
> - SQL table/column/index names
> - MongoDB collection names
> - Configuration values derived from external sources

**Safe Pattern:**
```java
// âŒ DANGEROUS - user input enables injection
var tableName = userInput + "_events";

// âœ… SAFE - controlled, predefined names
var tableName = "order_events";

// âš ï¸ VALIDATE if from config
PostgresqlUtil.checkIsValidTableOrColumnName(tableName);
MongoUtil.checkIsValidCollectionName(collectionName);
```

**Insufficient attention to these practices may leave your application vulnerable to attacks.**

### Module-Specific Security Guidance

See individual module documentation for detailed security considerations:
- [Components README](components/README.md#security)
- [foundation-types](components/foundation-types/README.md)
- [postgresql-event-store](components/postgresql-event-store/README.md)
- [postgresql-distributed-fenced-lock](components/postgresql-distributed-fenced-lock/README.md)
- [postgresql-queue](components/postgresql-queue/README.md)
- [eventsourced-aggregates](components/eventsourced-aggregates/README.md)
- [kotlin-eventsourcing](components/kotlin-eventsourcing/README.md)
- [springdata-mongo-queue](components/springdata-mongo-queue/README.md)
- [springdata-mongo-distributed-fenced-lock](components/springdata-mongo-distributed-fenced-lock/README.md)

---

## Testing

### Run All Tests

```bash
# All unit tests
mvn test

# All unit + integration tests
mvn verify
```

### Run Specific Module Tests

```bash
# Single module
mvn test -pl <module-name> -am

# Example: types module
mvn test -pl types -am

# Integration tests for a module
mvn verify -pl <module-name> -am
```

### Build Commands

```bash
# Full build
mvn clean install

# Fast build (skip dependency check)
mvn clean install -DskipDependencyCheck=true

# Build specific module with dependencies
mvn clean install -pl components/postgresql-event-store -am

# Simulated release build (test-release profile)
mvn clean install -P test-release
```

### Test Requirements

- **PostgreSQL modules**: Requires Docker for TestContainers
- **MongoDB modules**: Requires Docker for TestContainers (replica set mode)

---

## Resources

- **GitHub:** [https://github.com/trustworksdk/essentials-project](https://github.com/trustworksdk/essentials-project)
- **Components Documentation:** [components/README.md](components/README.md)
- **LLM Reference:** [LLM/LLM.md](LLM/LLM.md)
- **Each module contains detailed README.md** with usage examples
